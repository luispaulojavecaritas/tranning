<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

	<ui:define name="head">
		<style type="text/css">
		body {
			background-color: #F1F1F1;
		}
	</style>
	
	<script type="text/javascript">
								        PrimeFaces.locales['es'] = {
								                closeText: 'Cerrar',
								                prevText: 'Anterior',
								                nextText: 'Siguiente',
								                monthNames: ['Enero','Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
								                monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun','Jul','Ago','Sep','Oct','Nov','Dic'],
								                dayNames: ['Domingo','Lunes','Martes','Miércoles','Jueves','Viernes','Sábado'],
								                dayNamesShort: ['Dom','Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],
								                dayNamesMin: ['D','L','M','M','J','V','S'],
								                weekHeader: 'Semana',
								                firstDay: 1,
								                isRTL: false,
								                showMonthAfterYear: false,
								                yearSuffix: '',
								                timeOnlyTitle: 'Sólo hora',
								                timeText: 'Tiempo',
								                hourText: 'Hora',
								                minuteText: 'Minuto',
								                secondText: 'Segundo',
								                currentText: 'Fecha actual',
								                ampm: false,
								                month: 'Mes',
								                week: 'Semana',
								                day: 'Día',
								                allDayText : 'Todo el día'
								        };        
    </script>
	</ui:define>

	<ui:define name="content">

		<div class="Section">
			<div class="Container100 ShadowEffect WhiteBack">

				<div class="Container100 ui-fluid">
					<div class="Container100">
						<div
							class="Wid100 MarAuto DispBlock OvHidden FontMerriWeatherRegular BlueDarkest TexAlCenter"
							style="font-size: 3.0rem; padding-top: 0rem; padding-bottom: 0rem;">MANTENIMIENTO
							CLIENTES</div>
						<div class="Wid100 OvHidden" style="height: 1rem;"></div>
					</div>
					
					
					<div class="Container100">
						<h:form id="frmFiltro" >
							<p:panelGrid id="pnlFiltro" columns="3"
								columnClasses="ui-grid-col-8,ui-grid-col-2,ui-grid-col-2"
								layout="grid" styleClass="ui-panelgrid-blank" rendered="#{!clienteManaged.booregistro}"
								style="border:0px none; background-color:transparent;">
								<p:inputText placeholder="Ingrese caracteres a consultar"
									value="#{clienteManaged.filtro}" onkeyup="this.value = this.value.toUpperCase();"/>
								<p:commandButton value="Nuevo" update="frmCampos frmFiltro"
									actionListener="#{clienteManaged.nuevo()}" immediate="true" />
								<p:commandButton value="Filtrar"
									update="frmCampos frmTabla frmFiltro"
									actionListener="#{clienteManaged.filtrar()}" />
							</p:panelGrid>
						</h:form>
					</div>
					
					

					<div class="Container100">

						<h:form id="frmCampos">

							<div class="Container50 Responsive50">

								<p:panelGrid id="pnlCampos" columns="2" layout="grid"
									styleClass="ui-panelgrid-blank" rendered="#{clienteManaged.booregistro}" 
									style="border:0px none; background-color:transparent;">


									<p:outputLabel for="txt1" value="Origen Entidad: " />
									<p:selectOneMenu
										value="#{clienteManaged.entidad.catalogoOrigenEntidad.id}"
										id="txt1" required="true"
										requiredMessage="Seleccione Origen entidad" filter="true"
										filterMatchMode="startsWith">
										<f:selectItem itemLabel="---Seleccione---" itemValue="" />
										<f:selectItems value="#{clienteManaged.listaOrigenEntidad}"
											var="depar" itemLabel="#{depar.descripcion}"
											itemValue="#{depar.id}" />
									</p:selectOneMenu>

									<p:outputLabel for="txt2" value="Entidad:  " />
									<p:inputText id="txt2"
										value="#{clienteManaged.entidad.entidad}" required="true"
										requiredMessage="Ingrese entidad" onkeyup="this.value = this.value.toUpperCase();"/>

									<p:outputLabel for="txt3"
										value="Representante. Tipo Documento: " />
									<p:selectOneMenu
										value="#{clienteManaged.entidad.catalogoTipoDocumento.id}"
										id="txt3" required="true"
										requiredMessage="Seleccione Tipo Documento Representante"
										filter="true" filterMatchMode="startsWith">
										<f:selectItem itemLabel="---Seleccione---" itemValue="" />
										<f:selectItems value="#{clienteManaged.listaTipoDoc}"
											var="depar" itemLabel="#{depar.descripcion}"
											itemValue="#{depar.id}" />
									</p:selectOneMenu>

									<p:outputLabel for="txt4" value="Representante. Nro. Doc:  " />
									<p:inputText id="txt4"
										value="#{clienteManaged.entidad.nroDocumento}" required="true"
										requiredMessage="Ingrese Nro Documento representante" onkeyup="this.value = this.value.toUpperCase();"/>


									<p:outputLabel for="txt5" value="Representante. Nombre: " />
									<p:inputText id="txt5" value="#{clienteManaged.entidad.nombre}"
										required="true" requiredMessage="Ingrese Nombre representante" onkeyup="this.value = this.value.toUpperCase();"/>

									<p:outputLabel for="txt6"
										value="Representante. Apellido Paterno: " />
									<p:inputText id="txt6"
										value="#{clienteManaged.entidad.paterno}" required="true"
										requiredMessage="Ingrese Apellido Paterno Representante" onkeyup="this.value = this.value.toUpperCase();"/>

									<p:outputLabel for="txt7"
										value="Representante. Apellido Materno: " />
									<p:inputText id="txt7"
										value="#{clienteManaged.entidad.materno}" required="true"
										requiredMessage="Ingrese Apellido Materno Representante" onkeyup="this.value = this.value.toUpperCase();"/>

									<p:outputLabel for="txt8" value="Usuario Entidad: " />
									<p:inputText id="txt8" autocomplete="false"
										value="#{clienteManaged.entidad.usuario}" required="true"
										requiredMessage="Ingrese usuario de entidad" onkeyup="this.value = this.value.toUpperCase();"/>

									<p:outputLabel for="txt9" value="Clave Entidad: " />
									<p:password id="txt9" value="#{clienteManaged.entidad.clave}"
										required="true" requiredMessage="Ingrese clave de entidad"
										label="clave" rendered="#{clienteManaged.updateClave}"
										autocomplete="false" />
									<p:commandButton value="Cambiar Clave" immediate="true"
										process="@this"
										actionListener="#{clienteManaged.habilitarUpdateClave()}"
										rendered="#{!clienteManaged.updateClave}" update="frmCampos" />


									<p:outputLabel for="txt10" value="Fecha Inicial: " />
									<p:calendar id="txt10" pattern="dd-MM-yyyy" mask="true"
										placeholder="dd-mm-yyyy" navigator="true" required="true" locale="es"
										requiredMessage="Ingrese fecha de inicio"
										value="#{clienteManaged.entidad.fechainicial}" />

									<p:outputLabel for="txt11" value="Dias Vigencia: " />
									<p:spinner id="txt11" value="#{clienteManaged.entidad.dias}"
										required="true"
										requiredMessage="Ingrese dias de vigencia maxima" min="0"
										label="Cantidad maxima" />

									<p:outputLabel for="txt12" value="Estado: " />
									<p:selectOneMenu id="txt12"
										value="#{clienteManaged.entidad.estado}" required="true"
										requiredMessage="Seleccione estado" label="estado"
										filter="true" filterMatchMode="contains">
										<f:selectItem itemLabel="Seleccione" itemValue="" />
										<f:selectItem itemLabel="ACTIVO" itemValue="ACTIVO" />
										<f:selectItem itemLabel="INACTIVO" itemValue="INACTIVO" />
									</p:selectOneMenu>
								</p:panelGrid>

							</div>
							<div class="Container50 Responsive50">
								<p:dataTable id="tblServicios"
									value="#{clienteManaged.listaServicio}" var="ser"
									emptyMessage="No se encontraron registros" reflow="true" rendered="#{clienteManaged.booregistro}">
									<f:facet name="header">
									Enrrolamiento de Servicios
									</f:facet>

									<p:column headerText="Codigo">
										<h:outputText value="#{ser.codigo}" />
									</p:column>
									<p:column headerText="Descripcion">
										<h:outputText value="#{ser.descripcion}" />
									</p:column>
									<p:column headerText="Active">
										<p:inputSwitch value="#{ser.estado}" onLabel="on"
											offLabel="off" />
									</p:column>

								</p:dataTable>
							</div>

							<br />

							<p:commandButton value="Grabar" styleClass="GreenBack"
								actionListener="#{clienteManaged.guardar()}" rendered="#{clienteManaged.booregistro}"
								update="frmCampos frmTabla frmFiltro" />

							<div class="EmptyBox5" />

							<p:commandButton value="Limpiar / Cerrar"
								actionListener="#{clienteManaged.limpiar()}" update="frmCampos frmFiltro"
								immediate="true"  rendered="#{clienteManaged.booregistro}"/>
						</h:form>
					</div>

					<div class="Container100">
						<h:form id="frmTabla">
							<p:dataTable id="tabla" var="reg" value="#{clienteManaged.listaFiltrada}"
								selectionMode="single"
								selection="#{clienteManaged.entidadSeleccionada}"
								rowKey="#{reg.id}" rows="25" paginator="true"
								paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								rowsPerPageTemplate="25,50,75"
								emptyMessage="No se encontraron registros" reflow="true">

								<p:ajax event="rowSelect"
									listener="#{clienteManaged.onRowSelect}"
									update="frmCampos frmTabla frmFiltro" />
								<p:ajax event="rowUnselect"
									listener="#{clienteManaged.onRowUnselect}"
									update="frmCampos frmTabla frmFiltro" />

								<p:column headerText="Id">
									<h:outputText value="#{reg.id}" />
								</p:column>
								<p:column headerText="Usuario">
									<h:outputText value="#{reg.usuario}" />
								</p:column>
								<p:column headerText="Entidad">
									<h:outputText value="#{reg.entidad}" />
								</p:column>
								<p:column headerText="Encargado">
									<h:outputText
										value="#{reg.nombre} #{reg.paterno} #{reg.materno}" />
								</p:column>
								<p:column headerText="Fecha Vigencia">
									<h:outputText value="#{reg.fechafinal}">
										<f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" />
									</h:outputText>
								</p:column>
								<p:column headerText="Fecha registro">
									<h:outputText value="#{reg.registro}">
										<f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" />
									</h:outputText>
								</p:column>
							</p:dataTable>
						</h:form>
					</div>

				</div>


			</div>
		</div>


	</ui:define>

</ui:composition>